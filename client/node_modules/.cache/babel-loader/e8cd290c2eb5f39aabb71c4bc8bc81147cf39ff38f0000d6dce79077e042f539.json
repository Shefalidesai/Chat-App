{"ast":null,"code":"import _slicedToArray from\"C:/REACT/CHATAPPGRAPH/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"C:/REACT/CHATAPPGRAPH/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2;import React,{useState}from'react';import{createTheme,ThemeProvider}from'@mui/material/styles';import{ApolloClient,InMemoryCache,useMutation,useSubscription,gql}from'@apollo/client';import{WebSocketLink}from\"@apollo/client/link/ws\";import{Container,Chip,Grid,TextField,Button}from\"@mui/material\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var darkTheme=createTheme({palette:{mode:'dark'}});var link=new WebSocketLink({uri:\"ws://localhost:4000/\",options:{reconnect:true}});export var client=new ApolloClient({link:link,uri:'http://localhost:4000/',cache:new InMemoryCache()});var GET_MESSAGES=gql(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  subscription {\\n    messages {\\n      id\\n      user\\n      text\\n    }\\n  }\\n\"])));var POST_MESSAGE=gql(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  mutation($user:String!, $text:String!){\\n    postMessage(user:$user,text:$text)\\n  }\\n\"])));var Messages=function Messages(_ref){var user=_ref.user;var _useSubscription=useSubscription(GET_MESSAGES),data=_useSubscription.data;if(!data){return null;}return/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:\"5rem\"},children:data.messages.map(function(_ref2){var id=_ref2.id,messageUser=_ref2.user,text=_ref2.text;return/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:user===messageUser?\"right\":\"left\"},children:[/*#__PURE__*/_jsx(\"p\",{style:{marginBottom:\"0.3rem\"},children:messageUser}),/*#__PURE__*/_jsx(Chip,{style:{fontSize:\"0.9rem\"},color:user===messageUser?\"primary\":\"secondary\",label:text})]},id);})});};export var Chat=function Chat(){var _useState=useState(\"Shefali\"),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),text=_useState4[0],setText=_useState4[1];var _useMutation=useMutation(POST_MESSAGE),_useMutation2=_slicedToArray(_useMutation,1),postMessage=_useMutation2[0];var sendMessage=function sendMessage(){if(text.length>0&&user.length>0){postMessage({variables:{user:user,text:text}});setText(\"\");}else{alert(\"Missing fields!\");}};return/*#__PURE__*/_jsx(ThemeProvider,{theme:darkTheme,children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Messages,{user:user}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:3,children:/*#__PURE__*/_jsx(TextField,{onChange:function onChange(e){setUser(e.target.value);},value:user,size:\"small\",fullWidth:true,variant:\"outlined\",required:true,label:\"Required\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:8,children:/*#__PURE__*/_jsx(TextField,{onChange:function onChange(e){setText(e.target.value);},value:text,size:\"small\",fullWidth:true,variant:\"outlined\",required:true,label:\"Required\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:1,children:/*#__PURE__*/_jsx(Button,{onClick:sendMessage,fullWidth:true,variant:\"contained\",style:{backgroundColor:\"#60a820\",color:\"white\",borderRadius:'20%'},children:/*#__PURE__*/_jsx(\"img\",{src:\"https://play-lh.googleusercontent.com/F5a3I0qOcUGHq6yYuEvpHGfAklwW3yAUyEWqgS-05k0QYwIogSZSSC08VDrAilKGWMs\",alt:\"send btn\",style:{width:\"60%\"}})})})]})]})});};","map":{"version":3,"names":["React","useState","createTheme","ThemeProvider","ApolloClient","InMemoryCache","useMutation","useSubscription","gql","WebSocketLink","Container","Chip","Grid","TextField","Button","jsx","_jsx","jsxs","_jsxs","darkTheme","palette","mode","link","uri","options","reconnect","client","cache","GET_MESSAGES","_templateObject","_taggedTemplateLiteral","POST_MESSAGE","_templateObject2","Messages","_ref","user","_useSubscription","data","style","marginBottom","children","messages","map","_ref2","id","messageUser","text","textAlign","fontSize","color","label","Chat","_useState","_useState2","_slicedToArray","setUser","_useState3","_useState4","setText","_useMutation","_useMutation2","postMessage","sendMessage","length","variables","alert","theme","container","spacing","item","xs","onChange","e","target","value","size","fullWidth","variant","required","onClick","backgroundColor","borderRadius","src","alt","width"],"sources":["C:/REACT/CHATAPPGRAPH/client/src/Chat.js"],"sourcesContent":["import React, {useState} from 'react';\r\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\r\nimport { ApolloClient, InMemoryCache, useMutation, useSubscription, gql} from '@apollo/client';\r\nimport { WebSocketLink } from \"@apollo/client/link/ws\";\r\nimport {Container, Chip, Grid, TextField, Button, } from \"@mui/material\";\r\n\r\nconst darkTheme = createTheme({\r\n  palette: {\r\n    mode: 'dark', \r\n  },\r\n});\r\n\r\nconst link = new WebSocketLink({\r\n    uri: `ws://localhost:4000/`,\r\n    options: {\r\n      reconnect: true,\r\n    },\r\n});\r\n\r\n\r\nexport const client = new ApolloClient({\r\n  link,\r\n  uri: 'http://localhost:4000/', \r\n  cache: new InMemoryCache(),\r\n});\r\n\r\n\r\nconst GET_MESSAGES = gql`\r\n  subscription {\r\n    messages {\r\n      id\r\n      user\r\n      text\r\n    }\r\n  }\r\n`;\r\n\r\nconst POST_MESSAGE = gql`\r\n  mutation($user:String!, $text:String!){\r\n    postMessage(user:$user,text:$text)\r\n  }\r\n`;\r\n\r\nconst Messages = ({user}) =>{\r\n    const {data} = useSubscription(GET_MESSAGES)\r\n    if(!data){\r\n        return null;\r\n    }\r\n    return (\r\n      <div style={{marginBottom:\"5rem\"}}>\r\n        {data.messages.map(({id, user:messageUser, text})=>{\r\n          return(\r\n            <div key={id} style={{textAlign: user===messageUser?\"right\":\"left\"}}>\r\n              <p style={{marginBottom:\"0.3rem\"}}>{messageUser}</p>\r\n              <Chip style={{fontSize:\"0.9rem\"}} color={user===messageUser?\"primary\": \"secondary\"} label={text}/>\r\n            </div>\r\n          )\r\n        })}\r\n      </div>\r\n     )\r\n}\r\n\r\nexport const Chat = () =>{\r\n    const [user, setUser] = useState(\"Shefali\");\r\n    const [text, setText] = useState(\"\");\r\n    const [postMessage] = useMutation(POST_MESSAGE)\r\n    const sendMessage=()=>{\r\n      if(text.length>0 && user.length >0){\r\n        postMessage({\r\n          variables:{\r\n            user: user,\r\n            text: text\r\n          }\r\n        })\r\n        setText(\"\");\r\n      }else{\r\n        alert(\"Missing fields!\")\r\n      }\r\n      \r\n    }\r\n    \r\n    return(\r\n      <ThemeProvider theme={darkTheme}>\r\n        <Container >\r\n          <Messages user={user}/>\r\n          <Grid container spacing={2} >\r\n            <Grid item xs={3} >\r\n              <TextField onChange={(e)=>{\r\n                setUser(e.target.value)}} value={user} size=\"small\" fullWidth variant=\"outlined\" required label=\"Required\"  />\r\n            </Grid>\r\n            <Grid item xs={8}>\r\n              <TextField onChange={(e)=>{\r\n                setText(e.target.value)}} value={text} size=\"small\" fullWidth variant=\"outlined\" required label=\"Required\"/>\r\n            </Grid>\r\n            <Grid item xs={1}>\r\n              <Button onClick={sendMessage} fullWidth  variant=\"contained\" style={{backgroundColor:\"#60a820\", color:\"white\", borderRadius:'20%'}}><img src='https://play-lh.googleusercontent.com/F5a3I0qOcUGHq6yYuEvpHGfAklwW3yAUyEWqgS-05k0QYwIogSZSSC08VDrAilKGWMs' alt='send btn' style={{width:\"60%\"}}\r\n              ></img></Button>\r\n            </Grid>\r\n          </Grid>\r\n        </Container>\r\n        </ThemeProvider>\r\n    )\r\n}\r\n"],"mappings":"yRAAA,MAAO,CAAAA,KAAK,EAAGC,QAAQ,KAAO,OAAO,CACrC,OAASC,WAAW,CAAEC,aAAa,KAAQ,sBAAsB,CACjE,OAASC,YAAY,CAAEC,aAAa,CAAEC,WAAW,CAAEC,eAAe,CAAEC,GAAG,KAAO,gBAAgB,CAC9F,OAASC,aAAa,KAAQ,wBAAwB,CACtD,OAAQC,SAAS,CAAEC,IAAI,CAAEC,IAAI,CAAEC,SAAS,CAAEC,MAAM,KAAS,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEzE,GAAM,CAAAC,SAAS,CAAGjB,WAAW,CAAC,CAC5BkB,OAAO,CAAE,CACPC,IAAI,CAAE,MACR,CACF,CAAC,CAAC,CAEF,GAAM,CAAAC,IAAI,CAAG,GAAI,CAAAb,aAAa,CAAC,CAC3Bc,GAAG,uBAAwB,CAC3BC,OAAO,CAAE,CACPC,SAAS,CAAE,IACb,CACJ,CAAC,CAAC,CAGF,MAAO,IAAM,CAAAC,MAAM,CAAG,GAAI,CAAAtB,YAAY,CAAC,CACrCkB,IAAI,CAAJA,IAAI,CACJC,GAAG,CAAE,wBAAwB,CAC7BI,KAAK,CAAE,GAAI,CAAAtB,aAAa,CAAC,CAC3B,CAAC,CAAC,CAGF,GAAM,CAAAuB,YAAY,CAAGpB,GAAG,CAAAqB,eAAA,GAAAA,eAAA,CAAAC,sBAAA,0FAQvB,CAED,GAAM,CAAAC,YAAY,CAAGvB,GAAG,CAAAwB,gBAAA,GAAAA,gBAAA,CAAAF,sBAAA,kGAIvB,CAED,GAAM,CAAAG,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAAC,IAAA,CAAc,IAAT,CAAAC,IAAI,CAAAD,IAAA,CAAJC,IAAI,CACnB,IAAAC,gBAAA,CAAe7B,eAAe,CAACqB,YAAY,CAAC,CAArCS,IAAI,CAAAD,gBAAA,CAAJC,IAAI,CACX,GAAG,CAACA,IAAI,CAAC,CACL,MAAO,KAAI,CACf,CACA,mBACErB,IAAA,QAAKsB,KAAK,CAAE,CAACC,YAAY,CAAC,MAAM,CAAE,CAAAC,QAAA,CAC/BH,IAAI,CAACI,QAAQ,CAACC,GAAG,CAAC,SAAAC,KAAA,CAAgC,IAA9B,CAAAC,EAAE,CAAAD,KAAA,CAAFC,EAAE,CAAOC,WAAW,CAAAF,KAAA,CAAhBR,IAAI,CAAcW,IAAI,CAAAH,KAAA,CAAJG,IAAI,CAC7C,mBACE5B,KAAA,QAAcoB,KAAK,CAAE,CAACS,SAAS,CAAEZ,IAAI,GAAGU,WAAW,CAAC,OAAO,CAAC,MAAM,CAAE,CAAAL,QAAA,eAClExB,IAAA,MAAGsB,KAAK,CAAE,CAACC,YAAY,CAAC,QAAQ,CAAE,CAAAC,QAAA,CAAEK,WAAW,CAAI,CAAC,cACpD7B,IAAA,CAACL,IAAI,EAAC2B,KAAK,CAAE,CAACU,QAAQ,CAAC,QAAQ,CAAE,CAACC,KAAK,CAAEd,IAAI,GAAGU,WAAW,CAAC,SAAS,CAAE,WAAY,CAACK,KAAK,CAAEJ,IAAK,CAAC,CAAC,GAF1FF,EAGL,CAAC,CAEV,CAAC,CAAC,CACC,CAAC,CAEZ,CAAC,CAED,MAAO,IAAM,CAAAO,IAAI,CAAG,QAAP,CAAAA,IAAIA,CAAA,CAAQ,CACrB,IAAAC,SAAA,CAAwBnD,QAAQ,CAAC,SAAS,CAAC,CAAAoD,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAApCjB,IAAI,CAAAkB,UAAA,IAAEE,OAAO,CAAAF,UAAA,IACpB,IAAAG,UAAA,CAAwBvD,QAAQ,CAAC,EAAE,CAAC,CAAAwD,UAAA,CAAAH,cAAA,CAAAE,UAAA,IAA7BV,IAAI,CAAAW,UAAA,IAAEC,OAAO,CAAAD,UAAA,IACpB,IAAAE,YAAA,CAAsBrD,WAAW,CAACyB,YAAY,CAAC,CAAA6B,aAAA,CAAAN,cAAA,CAAAK,YAAA,IAAxCE,WAAW,CAAAD,aAAA,IAClB,GAAM,CAAAE,WAAW,CAAC,QAAZ,CAAAA,WAAWA,CAAA,CAAK,CACpB,GAAGhB,IAAI,CAACiB,MAAM,CAAC,CAAC,EAAI5B,IAAI,CAAC4B,MAAM,CAAE,CAAC,CAAC,CACjCF,WAAW,CAAC,CACVG,SAAS,CAAC,CACR7B,IAAI,CAAEA,IAAI,CACVW,IAAI,CAAEA,IACR,CACF,CAAC,CAAC,CACFY,OAAO,CAAC,EAAE,CAAC,CACb,CAAC,IAAI,CACHO,KAAK,CAAC,iBAAiB,CAAC,CAC1B,CAEF,CAAC,CAED,mBACEjD,IAAA,CAACb,aAAa,EAAC+D,KAAK,CAAE/C,SAAU,CAAAqB,QAAA,cAC9BtB,KAAA,CAACR,SAAS,EAAA8B,QAAA,eACRxB,IAAA,CAACiB,QAAQ,EAACE,IAAI,CAAEA,IAAK,CAAC,CAAC,cACvBjB,KAAA,CAACN,IAAI,EAACuD,SAAS,MAACC,OAAO,CAAE,CAAE,CAAA5B,QAAA,eACzBxB,IAAA,CAACJ,IAAI,EAACyD,IAAI,MAACC,EAAE,CAAE,CAAE,CAAA9B,QAAA,cACfxB,IAAA,CAACH,SAAS,EAAC0D,QAAQ,CAAE,SAAAA,SAACC,CAAC,CAAG,CACxBjB,OAAO,CAACiB,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,EAAE,CAACA,KAAK,CAAEvC,IAAK,CAACwC,IAAI,CAAC,OAAO,CAACC,SAAS,MAACC,OAAO,CAAC,UAAU,CAACC,QAAQ,MAAC5B,KAAK,CAAC,UAAU,CAAG,CAAC,CAC5G,CAAC,cACPlC,IAAA,CAACJ,IAAI,EAACyD,IAAI,MAACC,EAAE,CAAE,CAAE,CAAA9B,QAAA,cACfxB,IAAA,CAACH,SAAS,EAAC0D,QAAQ,CAAE,SAAAA,SAACC,CAAC,CAAG,CACxBd,OAAO,CAACc,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,EAAE,CAACA,KAAK,CAAE5B,IAAK,CAAC6B,IAAI,CAAC,OAAO,CAACC,SAAS,MAACC,OAAO,CAAC,UAAU,CAACC,QAAQ,MAAC5B,KAAK,CAAC,UAAU,CAAC,CAAC,CAC1G,CAAC,cACPlC,IAAA,CAACJ,IAAI,EAACyD,IAAI,MAACC,EAAE,CAAE,CAAE,CAAA9B,QAAA,cACfxB,IAAA,CAACF,MAAM,EAACiE,OAAO,CAAEjB,WAAY,CAACc,SAAS,MAAEC,OAAO,CAAC,WAAW,CAACvC,KAAK,CAAE,CAAC0C,eAAe,CAAC,SAAS,CAAE/B,KAAK,CAAC,OAAO,CAAEgC,YAAY,CAAC,KAAK,CAAE,CAAAzC,QAAA,cAACxB,IAAA,QAAKkE,GAAG,CAAC,2GAA2G,CAACC,GAAG,CAAC,UAAU,CAAC7C,KAAK,CAAE,CAAC8C,KAAK,CAAC,KAAK,CAAE,CACvR,CAAC,CAAQ,CAAC,CACZ,CAAC,EACH,CAAC,EACE,CAAC,CACG,CAAC,CAExB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}